# Introdu√ß√£o üöÄ

A efici√™ncia no fornecimento de energia el√©trica √© essencial para uma cidade inteligente e sustent√°vel. Visando oferecer um servi√ßo de qualidade para a popula√ß√£o, a prefeitura de uma cidade resolveu adotar uma infraestrutura de IoT para monitorar o consumo de energia el√©trica em tempo real e promover o uso consciente dos recursos.

Para atingir esse objetivo, a prefeitura e a concession√°ria de abastecimento lan√ßaram um edital que busca empreendedores de tecnologia especializados em IoT para apresentar solu√ß√µes que permitam a coleta e an√°lise dos dados de consumo de energia el√©trica em larga escala.

Nesse contexto, nossa startup foi convidada a apresentar um prot√≥tipo que utiliza tecnologias de IoT para coletar, processar e apresentar os dados de consumo de energia el√©trica de forma simples e acess√≠vel. Nosso sistema permitir√° que cada cliente tenha um controle mais preciso sobre seu consumo de energia el√©trica, podendo monitor√°-lo em tempo real e identificar poss√≠veis gargalos que gerem desperd√≠cios e gastos excessivos.

Neste relat√≥rio, apresentaremos um prot√≥tipo desenvolvido por uma startup fict√≠cia que visa solucionar o problema proposto pela prefeitura. O prot√≥tipo consiste em um sistema de coleta de dados automatizado, que permite a gera√ß√£o de informa√ß√µes precisas sobre o consumo de energia em resid√™ncias, o c√°lculo da fatura a ser paga e o envio de alertas aos usu√°rios em caso de consumo excessivo ou varia√ß√£o na conta. Al√©m disso, a solu√ß√£o envolve um servidor soquete que ir√° receber dados dos medidores inteligentes instalados nas resid√™ncias dos usu√°rios, e ser√° poss√≠vel visualizar esses dados de forma online atrav√©s de uma interface web que consome uma API REST.

Ao longo deste relat√≥rio, detalharemos a arquitetura do sistema, as tecnologias utilizadas, os resultados obtidos e as poss√≠veis melhorias para o futuro. Esperamos que este relat√≥rio seja √∫til para outras empresas e prefeituras que desejam incorporar a loT em seus servi√ßos e tornar suas cidades mais inteligentes.

Vamos juntos nessa jornada em busca de uma cidade mais inteligente e sustent√°vel! üí°üåç


# Conceitos & Metodologia

O c√≥digo desenvolvido √© dividido em tr√™s grandes partes: a primeira parte √© o medidor, que funciona como o cliente e √© respons√°vel por enviar os dados de consumo de energia para o servidor. A segunda parte √© o servidor, que armazena todos os dados enviados pelos medidores via soquete. E a terceira parte √© o usu√°rio online, onde foi criada uma interface web usando React para visualizar os dados de consumo de energia em tempo real.

Os conceitos que abrangem o problema principal do projeto s√£o: o uso de soquetes para comunica√ß√£o entre dispositivos diferentes, API REST, que permite levar esses dados para o cliente atrav√©s do protocolo HTTP, o uso de threads e outras formas para acompanhar m√∫ltiplas conex√µes, e o Docker para containeriza√ß√£o do projeto, garantindo que o ambiente de desenvolvimento e de produ√ß√£o sejam iguais, facilitando a implanta√ß√£o do sistema.

Esses conceitos ser√£o mais discutidos durante as 3 partes que comp√µe a aplica√ß√£o, assim como sua metodologia.

<lu>
    <li><a href="#client">Client</a></li>
    <li><a href="#server">Server</a></li>
    <li><a href="#user">User</a></li>
</lu>


<div id="client">

# Measurer (Cliente/Medidor) üì±

O cliente √© respons√°vel por enviar dados do consumo de energia el√©trica para o servidor atrav√©s de uma conex√£o socket TCP/IP. Ele √© desenvolvido em Python e utiliza a biblioteca socket para realizar a comunica√ß√£o com o servidor. O cliente √© iniciado a partir da execu√ß√£o do arquivo measurer.py.

O c√≥digo do cliente √© dividido em duas principais fun√ß√µes:

## Fun√ß√£o get_id()
Essa fun√ß√£o √© respons√°vel por solicitar ao servidor um ID para o medidor de consumo de energia el√©trica. Ela envia uma mensagem JSON contendo o valor 0 para o servidor e aguarda a resposta com o ID, que √© armazenado na vari√°vel id.

## Fun√ß√£o send_data()
Essa fun√ß√£o √© respons√°vel por enviar para o servidor os dados de consumo de energia el√©trica em tempo real. Ela envia uma mensagem JSON contendo o ID do medidor, o valor do consumo, a data e hora do consumo e o tipo de mensagem. A vari√°vel rate √© utilizada para simular o consumo em tempo real, e a vari√°vel spent √© utilizada para armazenar o total consumido pelo medidor.

Al√©m dessas fun√ß√µes, o c√≥digo do cliente tamb√©m possui uma fun√ß√£o menu() que permite ao usu√°rio alterar a taxa de consumo do medidor. Essa fun√ß√£o √© executada em uma thread separada, e permite que o usu√°rio aumente, diminua ou defina uma nova taxa de consumo. A thread principal do cliente √© respons√°vel por enviar os dados de consumo em tempo real.

Ao final da execu√ß√£o, o cliente √© encerrado e a conex√£o com o servidor √© fechada.

</div>